â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘   ğŸ‰ MIGRATION ARGOCD TERMINÃ‰E AVEC SUCCÃˆS ! ğŸ‰                           â•‘
â•‘                                                                           â•‘
â•‘   Projet: KID Livraison                                                  â•‘
â•‘   Date: 14 janvier 2026                                                  â•‘
â•‘   GitOps: ArgoCD + Kustomize + GitHub Actions                            â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ FICHIERS CRÃ‰Ã‰S
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Configuration ArgoCD (argocd/)
  â”œâ”€â”€ appproject.yaml              âœ… Projet ArgoCD avec RBAC
  â”œâ”€â”€ application-dev.yaml         âœ… Application Dev (auto-sync)
  â”œâ”€â”€ application-staging.yaml     âœ… Application Staging (auto-sync)
  â”œâ”€â”€ application-prod.yaml        âœ… Application Prod (manual)
  â””â”€â”€ README.md                    âœ… Documentation

ğŸ“ Manifests Kubernetes (gitops/)
  â”œâ”€â”€ base/
  â”‚   â”œâ”€â”€ namespace.yaml           âœ… Namespace
  â”‚   â”œâ”€â”€ configmap.yaml           âœ… Configuration
  â”‚   â”œâ”€â”€ secrets.yaml             âš ï¸  Secrets (Ã€ SÃ‰CURISER!)
  â”‚   â”œâ”€â”€ postgres.yaml            âœ… PostgreSQL StatefulSet
  â”‚   â”œâ”€â”€ backend.yaml             âœ… Backend Deployment
  â”‚   â”œâ”€â”€ frontend.yaml            âœ… Frontend Deployment
  â”‚   â”œâ”€â”€ ingress.yaml             âœ… Ingress avec TLS
  â”‚   â”œâ”€â”€ health-endpoint.yaml     âœ… Documentation health
  â”‚   â”œâ”€â”€ kustomization.yaml       âœ… Kustomize base
  â”‚   â””â”€â”€ README.md                âœ… Documentation
  â”‚
  â””â”€â”€ overlays/
      â”œâ”€â”€ dev/
      â”‚   â”œâ”€â”€ kustomization.yaml   âœ… Config Dev (1 replica)
      â”‚   â””â”€â”€ ingress-patch.yaml   âœ… Ingress Dev
      â”œâ”€â”€ staging/
      â”‚   â”œâ”€â”€ kustomization.yaml   âœ… Config Staging (2 replicas)
      â”‚   â””â”€â”€ ingress-patch.yaml   âœ… Ingress Staging
      â””â”€â”€ prod/
          â”œâ”€â”€ kustomization.yaml   âœ… Config Prod (3 replicas)
          â””â”€â”€ ingress-patch.yaml   âœ… Ingress Prod

ğŸ“ CI/CD Pipeline (.github/workflows/)
  â””â”€â”€ ci-cd-argocd.yml             âœ… Pipeline complet GitHub Actions

ğŸ“ Scripts de gestion
  â”œâ”€â”€ install-argocd.sh            âœ… Installation automatique ArgoCD
  â””â”€â”€ argocd-manage.sh             âœ… Gestion quotidienne (sync, logs, etc.)

ğŸ“ Backend Django (Backend/api/)
  â””â”€â”€ views/HealthView.py          âœ… Health checks Kubernetes
                                      - /api/health/
                                      - /api/health/readiness/
                                      - /api/health/liveness/

ğŸ“ Documentation
  â”œâ”€â”€ ARGOCD_DEPLOYMENT_GUIDE.md   âœ… Guide complet et dÃ©taillÃ©
  â”œâ”€â”€ ARGOCD_QUICKSTART.md         âœ… Quick start (10 min)
  â”œâ”€â”€ ARGOCD_MIGRATION_SUMMARY.md  âœ… RÃ©sumÃ© de la migration
  â”œâ”€â”€ TODO_CONFIGURATION.md        âœ… Actions obligatoires
  â”œâ”€â”€ GIT_WORKFLOW_ARGOCD.md       âœ… Workflow Git GitOps
  â””â”€â”€ .argocd/README.md            âœ… README principal ArgoCD

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ PROCHAINES Ã‰TAPES (OBLIGATOIRES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  LIRE LA DOCUMENTATION
    ğŸ“– Commencer par: TODO_CONFIGURATION.md
    ğŸš€ Puis: ARGOCD_QUICKSTART.md

2ï¸âƒ£  MODIFIER LES CONFIGURATIONS
    âš ï¸  URLs Git dans argocd/application-*.yaml
    âš ï¸  Images Docker dans gitops/ et .github/workflows/
    âš ï¸  Domaines dans gitops/base/ingress.yaml
    âš ï¸  Secrets dans gitops/base/secrets.yaml (UTILISER SEALED SECRETS!)

3ï¸âƒ£  INSTALLER ARGOCD
    $ ./install-argocd.sh

4ï¸âƒ£  CRÃ‰ER LES BRANCHES GIT
    $ git checkout -b develop
    $ git push origin develop
    $ git checkout -b staging
    $ git push origin staging

5ï¸âƒ£  DÃ‰PLOYER LES APPLICATIONS
    $ kubectl apply -f argocd/appproject.yaml
    $ kubectl apply -f argocd/application-dev.yaml
    $ kubectl apply -f argocd/application-staging.yaml
    $ kubectl apply -f argocd/application-prod.yaml

6ï¸âƒ£  VÃ‰RIFIER LE DÃ‰PLOIEMENT
    $ ./argocd-manage.sh status
    $ ./argocd-manage.sh ui

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŒ ENVIRONNEMENTS CONFIGURÃ‰S
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ Environment â”‚ Branch   â”‚ Namespace       â”‚ Replicas â”‚ Auto-sync â”‚ URL  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dev         â”‚ develop  â”‚ app-kid-dev     â”‚ 1        â”‚ âœ…        â”‚ dev. â”‚
â”‚             â”‚          â”‚                 â”‚          â”‚           â”‚ kid  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ Staging     â”‚ staging  â”‚ app-kid-staging â”‚ 2        â”‚ âœ…        â”‚ stag.â”‚
â”‚             â”‚          â”‚                 â”‚          â”‚           â”‚ kid  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ Production  â”‚ main     â”‚ app-kid-prod    â”‚ 3        â”‚ âŒ Manual â”‚ kid  â”‚
â”‚             â”‚          â”‚                 â”‚          â”‚           â”‚ .com â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› ï¸  COMMANDES UTILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Gestion ArgoCD
./argocd-manage.sh status              # Status toutes apps
./argocd-manage.sh sync dev            # Synchroniser dev
./argocd-manage.sh logs prod           # Voir logs prod
./argocd-manage.sh rollback staging    # Rollback staging
./argocd-manage.sh ui                  # Ouvrir ArgoCD UI
./argocd-manage.sh password            # RÃ©cupÃ©rer password admin

# Kubernetes
kubectl get applications -n argocd               # Lister apps ArgoCD
kubectl get pods -n app-kid-dev                  # Pods dev
kubectl logs -f deployment/backend -n app-kid-dev # Logs backend dev

# Kustomize
kustomize build gitops/overlays/dev              # Voir manifests dev
kustomize build gitops/overlays/prod             # Voir manifests prod

# Git workflow
git checkout -b feature/ma-feature     # Nouvelle feature
git push origin feature/ma-feature     # Push feature
# â†’ CrÃ©er PR vers develop â†’ Merge â†’ Auto-dÃ©ploiement dev!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” SÃ‰CURITÃ‰ - ACTIONS CRITIQUES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  NE JAMAIS commiter des secrets en clair dans Git!

âœ… UTILISER Sealed Secrets:

# 1. Installer Sealed Secrets
kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/\
download/v0.24.0/controller.yaml

# 2. CrÃ©er secret PostgreSQL chiffrÃ©
kubectl create secret generic postgres-secret \
  --from-literal=POSTGRES_PASSWORD="VOTRE_PASSWORD_SECURISE" \
  --from-literal=POSTGRES_DB="kid_livraison" \
  --from-literal=POSTGRES_USER="kid_user" \
  --dry-run=client -o yaml | \
  kubeseal -o yaml > gitops/base/postgres-sealed-secret.yaml

# 3. CrÃ©er secret Backend chiffrÃ©
kubectl create secret generic backend-secret \
  --from-literal=SECRET_KEY="VOTRE_SECRET_KEY_DJANGO" \
  --dry-run=client -o yaml | \
  kubeseal -o yaml > gitops/base/backend-sealed-secret.yaml

# 4. Supprimer ancien fichier secrets non chiffrÃ©
mv gitops/base/secrets.yaml gitops/base/secrets.yaml.example

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š WORKFLOW GITOPS COMPLET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Developer push code â†’ GitHub (branch: develop)
         â†“
2. GitHub Actions CI/CD:
   âœ“ Run tests backend + frontend
   âœ“ Build Docker images (backend + frontend)
   âœ“ Push images to ghcr.io
   âœ“ Update gitops/overlays/dev/kustomization.yaml (new tag)
   âœ“ Commit & push changes
         â†“
3. ArgoCD detects Git changes (polling or webhook)
         â†“
4. ArgoCD syncs manifests to Kubernetes cluster
         â†“
5. Application deployed in app-kid-dev namespace! ğŸ‰
         â†“
6. After validation â†’ Merge develop â†’ staging
         â†“
7. Auto-deployment to staging
         â†“
8. After validation â†’ Merge staging â†’ main
         â†“
9. MANUAL sync to production (./argocd-manage.sh sync prod)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š DOCUMENTATION COMPLÃˆTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ordre de lecture recommandÃ©:

1. TODO_CONFIGURATION.md          â†’ Actions obligatoires avant dÃ©marrage
2. ARGOCD_QUICKSTART.md           â†’ Quick start en 10 minutes
3. ARGOCD_DEPLOYMENT_GUIDE.md     â†’ Guide complet et dÃ©taillÃ©
4. GIT_WORKFLOW_ARGOCD.md         â†’ Workflow Git pour GitOps
5. ARGOCD_MIGRATION_SUMMARY.md    â†’ RÃ©sumÃ© complet de la migration
6. argocd/README.md               â†’ Documentation dossier ArgoCD
7. gitops/README.md               â†’ Documentation structure GitOps

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST FINALE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Configuration:
  â˜ Lire TODO_CONFIGURATION.md
  â˜ Modifier URLs Git dans argocd/application-*.yaml
  â˜ Modifier images Docker dans tous les fichiers
  â˜ Configurer domaines dans ingress.yaml
  â˜ SÃ©curiser secrets avec Sealed Secrets

Installation:
  â˜ Cluster Kubernetes accessible
  â˜ kubectl configurÃ©
  â˜ ArgoCD installÃ© (./install-argocd.sh)
  â˜ Mot de passe admin changÃ©

Git:
  â˜ Branches develop et staging crÃ©Ã©es
  â˜ Protection des branches configurÃ©e
  â˜ GitHub Secrets configurÃ©s (si nÃ©cessaire)

DÃ©ploiement:
  â˜ Projet ArgoCD dÃ©ployÃ©
  â˜ Application dev dÃ©ployÃ©e et synchronisÃ©e
  â˜ Application staging dÃ©ployÃ©e
  â˜ Application prod dÃ©ployÃ©e (sync manuel)

Tests:
  â˜ Health checks fonctionnels (/api/health/)
  â˜ Pipeline CI/CD testÃ© (push sur develop)
  â˜ DÃ©ploiement automatique dev vÃ©rifiÃ©
  â˜ Synchronisation ArgoCD vÃ©rifiÃ©e

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ†˜ SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En cas de problÃ¨me:

1. Consulter la documentation appropriÃ©e
2. VÃ©rifier les logs: ./argocd-manage.sh logs <env>
3. VÃ©rifier le status: ./argocd-manage.sh status
4. Consulter ArgoCD UI: ./argocd-manage.sh ui
5. VÃ©rifier les Ã©vÃ©nements Kubernetes:
   kubectl get events -n app-kid-dev --sort-by='.lastTimestamp'

Commandes de dÃ©pannage:

# Application OutOfSync
./argocd-manage.sh sync dev --force

# Pods ne dÃ©marrent pas
kubectl describe pod <pod-name> -n app-kid-dev
kubectl logs <pod-name> -n app-kid-dev

# ArgoCD inaccessible
kubectl get pods -n argocd
kubectl port-forward svc/argocd-server -n argocd 8080:443

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸŠ FÃ‰LICITATIONS!

Votre projet KID Livraison est maintenant prÃªt pour un dÃ©ploiement
GitOps moderne et automatisÃ© avec ArgoCD!

Prochaines Ã©tapes:
  1. Lire TODO_CONFIGURATION.md
  2. ComplÃ©ter la configuration
  3. Installer ArgoCD
  4. DÃ©ployer vos applications!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    ğŸš€ Bon dÃ©ploiement GitOps! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
